{"version":3,"file":"popper-base.js","sources":["../../src/enums.js","../../src/dom-utils/getBoundingClientRect.js","../../src/dom-utils/getWindow.js","../../src/dom-utils/getWindowScroll.js","../../src/dom-utils/instanceOf.js","../../src/dom-utils/getHTMLElementScroll.js","../../src/dom-utils/getNodeScroll.js","../../src/dom-utils/getScrollSum.js","../../src/dom-utils/unwrapVirtualElement.js","../../src/dom-utils/getCompositeRect.js","../../src/dom-utils/getLayoutRect.js","../../src/dom-utils/getNodeName.js","../../src/dom-utils/getParentNode.js","../../src/dom-utils/getComputedStyle.js","../../src/dom-utils/getScrollParent.js","../../src/dom-utils/listScrollParents.js","../../src/dom-utils/getElementMargins.js","../../src/dom-utils/addClientRectMargins.js","../../src/dom-utils/isTableElement.js","../../src/dom-utils/getOffsetParent.js","../../src/dom-utils/getCommonOffsetParent.js","../../src/utils/unwrapJqueryElement.js","../../src/utils/orderModifiers.js","../../src/utils/debounce.js","../../src/utils/format.js","../../src/utils/validateModifiers.js","../../src/index.js"],"sourcesContent":["// @flow\nexport const top: 'top' = 'top';\nexport const bottom: 'bottom' = 'bottom';\nexport const right: 'right' = 'right';\nexport const left: 'left' = 'left';\nexport const auto: 'auto' = 'auto';\nexport type BasePlacement =\n  | typeof top\n  | typeof bottom\n  | typeof right\n  | typeof left;\nexport const basePlacements: Array<BasePlacement> = [top, bottom, right, left];\n\nexport const start: 'start' = 'start';\nexport const end: 'end' = 'end';\nexport type VariationPlacement = typeof start | typeof end;\n\nexport const center: 'center' = 'center';\nexport const edges: 'edges' = 'edges';\nexport const surfaces: 'surfaces' = 'surfaces';\nexport type Tether = false | typeof center | typeof edges | typeof surfaces;\n\nexport const clippingParents: 'clippingParents' = 'clippingParents';\nexport const viewport: 'viewport' = 'viewport';\nexport type OverflowArea =\n  | HTMLElement\n  | typeof clippingParents\n  | typeof viewport;\nexport type RootOverflowArea = typeof viewport | 'document';\n\nexport const popper: 'popper' = 'popper';\nexport const reference: 'reference' = 'reference';\nexport type Context = typeof popper | typeof reference;\n\nexport type Placement =\n  | 'auto'\n  | 'auto-start'\n  | 'auto-end'\n  | 'top'\n  | 'top-start'\n  | 'top-end'\n  | 'bottom'\n  | 'bottom-start'\n  | 'bottom-end'\n  | 'right'\n  | 'right-start'\n  | 'right-end'\n  | 'left'\n  | 'left-start'\n  | 'left-end';\n\nexport const placements: Array<Placement> = basePlacements.reduce(\n  (acc: Array<Placement>, placement: BasePlacement): Array<Placement> =>\n    acc.concat([\n      placement,\n      (`${placement}-${start}`: any),\n      (`${placement}-${end}`: any),\n    ]),\n  []\n);\n\n// modifiers that need to read the DOM\nexport const beforeRead: 'beforeRead' = 'beforeRead';\nexport const read: 'read' = 'read';\nexport const afterRead: 'afterRead' = 'afterRead';\n// pure-logic modifiers\nexport const beforeMain: 'beforeMain' = 'beforeMain';\nexport const main: 'main' = 'main';\nexport const afterMain: 'afterMain' = 'afterMain';\n// modifier with the purpose to write to the DOM (or write into a framework state)\nexport const beforeWrite: 'beforeWrite' = 'beforeWrite';\nexport const write: 'write' = 'write';\nexport const afterWrite: 'afterWrite' = 'afterWrite';\nexport const modifierPhases: Array<ModifierPhases> = [\n  beforeRead,\n  read,\n  afterRead,\n  beforeMain,\n  main,\n  afterMain,\n  beforeWrite,\n  write,\n  afterWrite,\n];\n\nexport type ModifierPhases =\n  | typeof beforeRead\n  | typeof read\n  | typeof afterRead\n  | typeof beforeMain\n  | typeof main\n  | typeof afterMain\n  | typeof beforeWrite\n  | typeof write\n  | typeof afterWrite;\n","// @flow\nimport type { ClientRectObject, VirtualElement } from '../types';\n\nexport default (element: Element | VirtualElement): ClientRectObject => {\n  const rect = JSON.parse(JSON.stringify(element.getBoundingClientRect()));\n  rect.x = rect.left;\n  rect.y = rect.top;\n  return rect;\n};\n","// @flow\nexport default function getWindow(node: mixed) {\n  const ownerDocument: ?Document =\n    node != null &&\n    typeof node === 'object' &&\n    node.hasOwnProperty('ownerDocument')\n      ? // $FlowFixMe: assume ownerDocument to be the one we are looking for\n        node.ownerDocument\n      : null;\n  return ownerDocument != null ? ownerDocument.defaultView : window;\n}\n","// @flow\nimport getWindow from './getWindow';\n\nexport default function getWindowScroll(node: Node) {\n  const win = getWindow(node);\n  const scrollLeft = win.pageXOffset;\n  const scrollTop = win.pageYOffset;\n  return { scrollLeft, scrollTop };\n}\n","// @flow\nimport getWindow from './getWindow';\n\n/*:: declare function isElement(node: mixed): boolean %checks(node instanceof\n  Element); */\n\nfunction isElement(node) {\n  const OwnElement = getWindow(node).Element;\n  return node instanceof OwnElement;\n}\n\n/*:: declare function isHTMLElement(node: mixed): boolean %checks(node instanceof\n  HTMLElement); */\n\nfunction isHTMLElement(node) {\n  const OwnElement = getWindow(node).HTMLElement;\n  return node instanceof OwnElement;\n}\n\n/*:: declare function isShadowRoot(node: mixed): boolean %checks(node instanceof\n  ShadowRoot); */\n\nfunction isShadowRoot(node) {\n  const OwnElement = getWindow(node).ShadowRoot;\n  return node instanceof OwnElement;\n}\n\nexport { isElement, isHTMLElement, isShadowRoot };\n","// @flow\n\nexport default function getHTMLElementScroll(element: HTMLElement) {\n  return {\n    scrollLeft: element.scrollLeft,\n    scrollTop: element.scrollTop,\n  };\n}\n","// @flow\nimport getWindowScroll from './getWindowScroll';\nimport getWindow from './getWindow';\nimport { isHTMLElement } from './instanceOf';\nimport getHTMLElementScroll from './getHTMLElementScroll';\n\nexport default function getNodeScroll(node: Node) {\n  if (node === getWindow(node) || !isHTMLElement(node)) {\n    return getWindowScroll(node);\n  } else {\n    return getHTMLElementScroll(node);\n  }\n}\n","// @flow\nimport getNodeScroll from './getNodeScroll';\n\nexport default (scrollParents: Array<Element>) =>\n  scrollParents.reduce(\n    (scroll, scrollParent) => {\n      const nodeScroll = getNodeScroll(scrollParent);\n      scroll.scrollTop += nodeScroll.scrollTop;\n      scroll.scrollLeft += nodeScroll.scrollLeft;\n      return scroll;\n    },\n    { scrollTop: 0, scrollLeft: 0 }\n  );\n","// @flow\nimport type { VirtualElement } from '../types';\nimport { isElement } from './instanceOf';\n\nexport default (element: Element | VirtualElement): Element => {\n  return isElement(element) ? element : element.contextElement;\n};\n","// @flow\nimport type { Rect, VirtualElement } from '../types';\nimport getBoundingClientRect from './getBoundingClientRect';\nimport getScrollSum from './getScrollSum';\nimport unwrapVirtualElement from './unwrapVirtualElement';\nimport { isElement } from './instanceOf';\n\n// Returns the composite rect of an element relative to its offsetParent.\n// Composite means it takes into account transforms as well as layout.\nexport default (\n  elementOrVirtualElement: Element | VirtualElement,\n  commonOffsetParent: Element,\n  isFixed: boolean = false\n): Rect => {\n  const element = unwrapVirtualElement(elementOrVirtualElement);\n  const rect = getBoundingClientRect(element);\n  const offsetParentRect =\n    isElement(commonOffsetParent) && !isFixed\n      ? getBoundingClientRect(commonOffsetParent)\n      : { left: 0, top: 0 };\n  const offsetParentScrollSum = getScrollSum(\n    isFixed ? [] : [commonOffsetParent]\n  );\n\n  const width = rect.width;\n  const height = rect.height;\n  const x =\n    rect.left + offsetParentScrollSum.scrollLeft - offsetParentRect.left;\n  const y = rect.top + offsetParentScrollSum.scrollTop - offsetParentRect.top;\n\n  return { width, height, x, y };\n};\n","// @flow\nimport type { Rect } from '../types';\n\n// Returns the layout rect of an element relative to its offsetParent. Layout\n// means it doesn't take into account transforms.\nexport default (element: HTMLElement): Rect => ({\n  x: element.offsetLeft,\n  y: element.offsetTop,\n  width: element.offsetWidth,\n  height: element.offsetHeight,\n});\n","// @flow\n\nexport default (element: ?Node): ?string =>\n  element ? (element.nodeName || '').toLowerCase() : null;\n","// @flow\nimport getNodeName from './getNodeName';\n\nexport default (element: Node | ShadowRoot): Node => {\n  if (getNodeName(element) === 'html') {\n    // DocumentElement detectedF\n    return element;\n  }\n  return (\n    element.parentNode || // DOM Element detected\n    // $FlowFixMe: need a better way to handle this...\n    element.host || // ShadowRoot detected\n    document.ownerDocument || // Fallback to ownerDocument if available\n    document.documentElement // Or to documentElement if everything else fails\n  );\n};\n","// @flow\nimport getWindow from './getWindow';\n\nexport default function getComputedStyle(\n  element: Element\n): CSSStyleDeclaration {\n  return getWindow(element).getComputedStyle(element);\n}\n","// @flow\nimport getParentNode from './getParentNode';\nimport getComputedStyle from './getComputedStyle';\nimport getNodeName from './getNodeName';\nimport { isHTMLElement } from './instanceOf';\n\nexport default function getScrollParent(node: Node): HTMLElement {\n  if (['html', 'body', '#document'].includes(getNodeName(node))) {\n    return node.ownerDocument.body;\n  }\n\n  if (isHTMLElement(node)) {\n    // Firefox want us to check `-x` and `-y` variations as well\n    const { overflow, overflowX, overflowY } = getComputedStyle(node);\n    if (/(auto|scroll|overlay)/.test(overflow + overflowY + overflowX)) {\n      return node;\n    }\n  }\n\n  return getScrollParent(getParentNode(node));\n}\n","// @flow\nimport getScrollParent from './getScrollParent';\nimport getParentNode from './getParentNode';\nimport getNodeName from './getNodeName';\nimport getWindow from './getWindow';\n\nexport default function listScrollParents(\n  element: Node,\n  list: Array<Element> = []\n): Array<Element> {\n  const scrollParent = getScrollParent(element);\n  const isBody = getNodeName(scrollParent) === 'body';\n  const target = isBody ? getWindow(scrollParent) : scrollParent;\n  const updatedList = list.concat(target);\n  return isBody\n    ? updatedList\n    : updatedList.concat(listScrollParents(getParentNode(target)));\n}\n","// @flow\nimport getComputedStyle from './getComputedStyle';\n\nexport default (element: HTMLElement) => {\n  // get the element margins, we need them to properly align the popper\n  const styles = getComputedStyle(element);\n\n  const top = parseFloat(styles.marginTop) || 0;\n  const right = parseFloat(styles.marginRight) || 0;\n  const bottom = parseFloat(styles.marginBottom) || 0;\n  const left = parseFloat(styles.marginLeft) || 0;\n\n  return { top, right, bottom, left };\n};\n","// @flow\nimport type { Rect } from '../types';\nimport getElementMargins from './getElementMargins';\n\nexport default (rect: Rect, element: HTMLElement): Rect => {\n  const margins = getElementMargins(element);\n\n  return {\n    width: rect.width + margins.left + margins.right,\n    height: rect.height + margins.top + margins.bottom,\n    y: rect.y - margins.top,\n    x: rect.x - margins.left,\n  };\n};\n","// @flow\nimport getNodeName from './getNodeName';\n\nexport default (element: Element): boolean =>\n  ['table', 'td', 'th'].includes(getNodeName(element));\n","// @flow\nimport getWindow from './getWindow';\nimport getNodeName from './getNodeName';\nimport getComputedStyle from './getComputedStyle';\nimport { isHTMLElement } from './instanceOf';\nimport isTableElement from './isTableElement';\n\nconst getTrueOffsetParent = (element: Element): ?Element =>\n  isHTMLElement(element) ? element.offsetParent : null;\n\nexport default function getOffsetParent(element: Element) {\n  const window = getWindow(element);\n\n  let offsetParent = getTrueOffsetParent(element);\n\n  // Find the nearest non-table offsetParent\n  while (offsetParent && isTableElement(offsetParent)) {\n    offsetParent = getTrueOffsetParent(offsetParent);\n  }\n\n  if (\n    offsetParent &&\n    getNodeName(offsetParent) === 'body' &&\n    getComputedStyle(offsetParent).position === 'static'\n  ) {\n    return window;\n  }\n\n  return offsetParent || window;\n}\n","// @flow\nimport getOffsetParent from './getOffsetParent';\nimport { isElement, isShadowRoot } from './instanceOf';\nimport getWindow from './getWindow';\n\nfunction isOffsetContainer(element: Element): boolean {\n  const firstElementChild = element.firstElementChild;\n  return !firstElementChild || getOffsetParent(firstElementChild) === element;\n}\n\nfunction getRoot(node: Node): Node {\n  const parentNode = node.parentNode;\n\n  if (parentNode != null) {\n    return getRoot(parentNode);\n  }\n\n  return node;\n}\n\nexport default function getCommonOffsetParent(\n  element1: Element,\n  element2: Element\n): Element {\n  // If one of the nodes is inside shadowDOM, find which one\n  const element1root = getRoot(element1);\n  const element2root = getRoot(element2);\n\n  if (isShadowRoot(element1root)) {\n    return getCommonOffsetParent(element1root.host, element2);\n  } else if (isShadowRoot(element2root)) {\n    return getCommonOffsetParent(element1, element2root.host);\n  }\n\n  // Here we make sure to give as \"start\" the element that comes first in the DOM\n  const order =\n    element1.compareDocumentPosition(element2) &\n    Node.DOCUMENT_POSITION_FOLLOWING;\n  const start = order ? element1 : element2;\n  const end = order ? element2 : element1;\n\n  // Both nodes are inside #document\n  // Get common ancestor container\n  const range = document.createRange();\n  range.setStart(start, 0);\n  range.setEnd(end, 0);\n  const commonAncestorContainer = range.commonAncestorContainer;\n\n  // If ancestor container is not an element, we must return a safe\n  // fallback, body is a good bet\n  if (!isElement(commonAncestorContainer)) {\n    return getWindow(commonAncestorContainer).body;\n  }\n\n  // if ancestor container is also an offset container, we found our winner\n  if (isOffsetContainer(commonAncestorContainer)) {\n    return commonAncestorContainer;\n  }\n\n  return getOffsetParent(commonAncestorContainer);\n}\n","// @flow\nimport type { JQueryWrapper } from '../types';\n\nexport default (element: HTMLElement | JQueryWrapper): HTMLElement =>\n  // $FlowFixMe: need to get type refinement work\n  element.hasOwnProperty('jquery') ? element[0] : element;\n","// @flow\nimport type { Modifier } from '../types';\nimport { modifierPhases } from '../enums';\n\n// source: https://stackoverflow.com/questions/49875255\nconst order = modifiers => {\n  const map = new Map();\n  const visited = new Set();\n  const result = [];\n\n  modifiers.forEach(modifier => {\n    map.set(modifier.name, modifier);\n  });\n\n  // On visiting object, check for its dependencies and visit them recursively\n  function sort(modifier: Modifier<any>) {\n    visited.add(modifier.name);\n\n    const requires = [\n      ...(modifier.requires || []),\n      ...(modifier.optionallyRequires || []),\n    ];\n\n    requires.forEach(dep => {\n      if (!visited.has(dep)) {\n        const depModifier = map.get(dep);\n\n        if (depModifier) {\n          sort(depModifier);\n        }\n      }\n    });\n\n    result.push(modifier);\n  }\n\n  modifiers.forEach(modifier => {\n    if (!visited.has(modifier.name)) {\n      // check for visited object\n      sort(modifier);\n    }\n  });\n\n  return result;\n};\n\nexport default (modifiers: Array<Modifier<any>>): Array<Modifier<any>> => {\n  // order based on dependencies\n  const orderedModifiers = order(modifiers);\n\n  // order based on phase\n  return modifierPhases.reduce((acc, phase) => {\n    return acc.concat(\n      orderedModifiers.filter(modifier => modifier.phase === phase)\n    );\n  }, []);\n};\n","// @flow\nexport default function microtaskDebounce(fn: Function) {\n  let pending;\n  return () => {\n    if (!pending) {\n      pending = new Promise<void>(resolve => {\n        Promise.resolve().then(() => {\n          pending = undefined;\n          resolve(fn());\n        });\n      });\n    }\n\n    return pending;\n  };\n}\n","// @flow\nexport default (str: string, ...args: Array<string>) =>\n  [...args].reduce((p, c) => p.replace(/%s/, c), str);\n","// @flow\nimport format from './format';\nimport { modifierPhases } from '../enums';\n\nconst INVALID_MODIFIER_ERROR =\n  'Popper: modifier \"%s\" provided an invalid %s property, expected %s but got %s';\nconst MISSING_DEPENDENCY_ERROR =\n  'Popper: modifier \"%s\" requires \"%s\", but \"%s\" modifier is not available';\nconst VALID_PROPERTIES = [\n  'name',\n  'enabled',\n  'phase',\n  'fn',\n  'onLoad',\n  'requires',\n  'options',\n];\n\nexport default (modifiers: Array<any>): void => {\n  modifiers.forEach(modifier => {\n    Object.keys(modifier).forEach(key => {\n      switch (key) {\n        case 'name':\n          if (typeof modifier.name !== 'string') {\n            console.error(\n              format(\n                INVALID_MODIFIER_ERROR,\n                String(modifier.name),\n                '\"name\"',\n                '\"string\"',\n                `\"${String(modifier.name)}\"`\n              )\n            );\n          }\n          break;\n        case 'enabled':\n          if (typeof modifier.enabled !== 'boolean') {\n            console.error(\n              format(\n                INVALID_MODIFIER_ERROR,\n                modifier.name,\n                '\"enabled\"',\n                '\"boolean\"',\n                `\"${String(modifier.enabled)}\"`\n              )\n            );\n          }\n        case 'phase':\n          if (!modifierPhases.includes(modifier.phase)) {\n            console.error(\n              format(\n                INVALID_MODIFIER_ERROR,\n                modifier.name,\n                '\"phase\"',\n                `either ${modifierPhases.join(', ')}`,\n                `\"${String(modifier.phase)}\"`\n              )\n            );\n          }\n          break;\n        case 'fn':\n          if (typeof modifier.fn !== 'function') {\n            console.error(\n              format(\n                INVALID_MODIFIER_ERROR,\n                modifier.name,\n                '\"fn\"',\n                '\"function\"',\n                `\"${String(modifier.fn)}\"`\n              )\n            );\n          }\n          break;\n        case 'onLoad':\n          if (typeof modifier.onLoad !== 'function') {\n            console.error(\n              format(\n                INVALID_MODIFIER_ERROR,\n                modifier.name,\n                '\"onLoad\"',\n                '\"function\"',\n                `\"${String(modifier.fn)}\"`\n              )\n            );\n          }\n          break;\n        case 'onDestroy':\n          if (typeof modifier.onDestroy !== 'function') {\n            console.error(\n              format(\n                INVALID_MODIFIER_ERROR,\n                modifier.name,\n                '\"onDestroy\"',\n                '\"function\"',\n                `\"${String(modifier.fn)}\"`\n              )\n            );\n          }\n          break;\n        case 'requires':\n          if (!Array.isArray(modifier.requires)) {\n            console.error(\n              format(\n                INVALID_MODIFIER_ERROR,\n                modifier.name,\n                '\"requires\"',\n                '\"array\"',\n                `\"${String(modifier.requires)}\"`\n              )\n            );\n          }\n          break;\n        case 'optionallyRequires':\n          if (!Array.isArray(modifier.requires)) {\n            console.error(\n              format(\n                INVALID_MODIFIER_ERROR,\n                modifier.name,\n                '\"requires\"',\n                '\"array\"',\n                `\"${String(modifier.requires)}\"`\n              )\n            );\n          }\n          break;\n        case 'options':\n        case 'data':\n          break;\n        default:\n          console.error(\n            `PopperJS: an invalid property has been provided to the \"${\n              modifier.name\n            }\" modifier, valid properties are ${VALID_PROPERTIES.map(\n              s => `\"${s}\"`\n            ).join(', ')}; but \"${key}\" was provided.`\n          );\n      }\n\n      modifier.requires &&\n        modifier.requires.forEach(requirement => {\n          if (modifiers.find(mod => mod.name === requirement) == null) {\n            console.error(\n              format(\n                MISSING_DEPENDENCY_ERROR,\n                String(modifier.name),\n                requirement,\n                requirement\n              )\n            );\n          }\n        });\n    });\n  });\n};\n","// @flow\nimport type {\n  JQueryWrapper,\n  State,\n  Options,\n  Modifier,\n  Instance,\n} from './types';\n\nexport * from './types';\nexport * from './enums';\n\n// DOM Utils\nimport getCompositeRect from './dom-utils/getCompositeRect';\nimport getLayoutRect from './dom-utils/getLayoutRect';\nimport listScrollParents from './dom-utils/listScrollParents';\nimport addClientRectMargins from './dom-utils/addClientRectMargins';\nimport getCommonOffsetParent from './dom-utils/getCommonOffsetParent';\nimport unwrapVirtualElement from './dom-utils/unwrapVirtualElement';\n\n// Pure Utils\nimport unwrapJqueryElement from './utils/unwrapJqueryElement';\nimport orderModifiers from './utils/orderModifiers';\nimport debounce from './utils/debounce';\nimport validateModifiers from './utils/validateModifiers';\n\nconst INVALID_ELEMENT_ERROR =\n  'Popper: Invalid reference or popper argument provided to Popper, they must be either a valid DOM element, virtual element, or a jQuery-wrapped DOM element.';\nconst INFINITE_LOOP_ERROR =\n  'Popper: An infinite loop in the modifiers cycle has been detected! The cycle has been interrupted to prevent a browser crash.';\n\nconst areValidElements = (...args: Array<any>): boolean =>\n  !args.some(\n    element => !(element && typeof element.getBoundingClientRect === 'function')\n  );\n\nconst defaultOptionsValue: Options = {\n  placement: 'bottom',\n  modifiers: [],\n  strategy: 'absolute',\n};\n\ntype PopperGeneratorArgs = {\n  defaultModifiers?: Array<Modifier<any>>,\n  defaultOptions?: $Shape<Options>,\n};\n\nexport function popperGenerator(generatorOptions: PopperGeneratorArgs = {}) {\n  const {\n    defaultModifiers = [],\n    defaultOptions = defaultOptionsValue,\n  } = generatorOptions;\n\n  return function createPopper(\n    reference: HTMLElement | JQueryWrapper,\n    popper: HTMLElement | JQueryWrapper,\n    options: $Shape<Options> = defaultOptions\n  ): Instance {\n    // Unwrap `reference` and `popper` elements in case they are\n    // wrapped by jQuery, otherwise consume them as is\n    const referenceElement = unwrapJqueryElement(reference);\n    const popperElement = unwrapJqueryElement(popper);\n\n    let state: $Shape<State> = {\n      placement: 'bottom',\n      orderedModifiers: [],\n      options: { ...defaultOptionsValue, ...defaultOptions },\n      modifiersData: {},\n      elements: {\n        reference: referenceElement,\n        popper: popperElement,\n      },\n      attributes: {},\n      styles: {},\n    };\n\n    const instance = {\n      setOptions(options) {\n        // Store options into state\n        state.options = {\n          ...defaultOptions,\n          ...options,\n        };\n\n        state.scrollParents = {\n          reference: listScrollParents(referenceElement),\n          popper: listScrollParents(popperElement),\n        };\n\n        // Order `options.modifiers` so that the dependencies are fulfilled\n        // once the modifiers are executed\n        state.orderedModifiers = orderModifiers([\n          ...state.options.modifiers.filter(\n            modifier =>\n              !defaultModifiers.find(({ name }) => name === modifier.name)\n          ),\n          ...defaultModifiers.map(defaultModifier => ({\n            ...defaultModifier,\n            ...state.options.modifiers.find(\n              ({ name }) => name === defaultModifier.name\n            ),\n          })),\n        ]);\n\n        // Validate the provided modifiers so that the consumer will get warned\n        // if one of the custom modifiers is invalid for any reason\n        if (__DEV__) {\n          validateModifiers(state.orderedModifiers);\n        }\n      },\n      // Syncronous and forcefully executed update\n      // it will always be executed even if not necessary, usually NOT needed\n      // use Popper#update instead\n      forceUpdate() {\n        const {\n          reference: referenceElement,\n          popper: popperElement,\n        } = state.elements;\n        // Don't proceed if `reference` or `popper` are not valid elements anymore\n        if (!areValidElements(referenceElement, popperElement)) {\n          if (__DEV__) {\n            console.error(INVALID_ELEMENT_ERROR);\n          }\n          return;\n        }\n\n        const isFixed = state.options.strategy === 'fixed';\n\n        // Get initial measurements\n        // these are going to be used to compute the initial popper offsets\n        // and as cache for any modifier that needs them later\n        state.measures = {\n          reference: getCompositeRect(\n            referenceElement,\n            getCommonOffsetParent(\n              unwrapVirtualElement(referenceElement),\n              popperElement\n            ),\n            isFixed\n          ),\n          // CSS marginsc an be applied to popper elements to quickly\n          // apply offsets dynamically based on some CSS selectors.\n          // For this reason we include margins in this calculation.\n          popper: addClientRectMargins(\n            getLayoutRect(popperElement),\n            popperElement\n          ),\n        };\n\n        // Modifiers have the ability to read the current Popper state, included\n        // the popper offsets, and modify it to address specifc cases\n        state.reset = false;\n\n        // Cache the placement in cache to make it available to the modifiers\n        // modifiers will modify this one (rather than the one in options)\n        const prevPlacement = state.placement;\n        state.placement = state.options.placement;\n\n        state.orderedModifiers.forEach(\n          modifier =>\n            (state.modifiersData[modifier.name] = {\n              ...modifier.data,\n            })\n        );\n\n        let __debug_loops__ = 0;\n        for (let index = 0; index < state.orderedModifiers.length; index++) {\n          if (__DEV__) {\n            __debug_loops__ += 1;\n            if (__debug_loops__ > 100) {\n              console.error(INFINITE_LOOP_ERROR);\n              break;\n            }\n          }\n\n          if (state.reset === true) {\n            state.reset = false;\n            index = -1;\n            continue;\n          }\n\n          const { fn, enabled, options = {}, name } = state.orderedModifiers[\n            index\n          ];\n\n          if (enabled && typeof fn === 'function') {\n            state = fn({ state, options, name, instance });\n          }\n        }\n\n        // Prevents a jitter if elements' size changes based on placement.\n        // This is separate from and does not solve the \"flip flicker\" issue.\n        // We can't know ahead of time (before the placement gets written to the\n        // DOM) what size the element will be due to conditionally applied/\n        // computed CSS based on placement (e.g. margins on arrow)\n        if (prevPlacement !== state.placement) {\n          instance.forceUpdate();\n        }\n      },\n\n      // Async and optimistically optimized update\n      // it will not be executed if not necessary\n      // debounced, so that it only runs at most once-per-tick\n      update: debounce(\n        () =>\n          // prettier-ignore\n          new Promise<$Shape<State>>(resolve => {\n          instance.forceUpdate();\n          resolve(state);\n        })\n      ),\n\n      destroy() {\n        // Run `onDestroy` modifier methods\n        state.orderedModifiers.forEach(\n          ({ onDestroy, enabled, name, options = {} }) =>\n            enabled &&\n            onDestroy &&\n            onDestroy({ state, name, instance, options })\n        );\n      },\n    };\n\n    // Don't proceed if `reference` or `popper` are invalid elements\n    if (!areValidElements(referenceElement, popperElement)) {\n      if (__DEV__) {\n        console.error(INVALID_ELEMENT_ERROR);\n      }\n      return instance;\n    }\n\n    instance.setOptions(options);\n\n    // Modifiers have the opportunity to execute some arbitrary code before\n    // the first update cycle is ran, the order of execution will be the same\n    // defined by the modifier dependencies directive.\n    // The `onLoad` function may add or alter the options of themselves\n    state.orderedModifiers.forEach(\n      ({ onLoad, enabled, name, options = {} }) =>\n        enabled &&\n        onLoad &&\n        (state =\n          onLoad({\n            state,\n            name,\n            instance,\n            options,\n          }) || state)\n    );\n\n    instance.update();\n\n    return instance;\n  };\n}\n\nexport const createPopper = popperGenerator();\n"],"names":["top","bottom","right","left","basePlacements","start","end","placements","reduce","acc","placement","concat","beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite","modifierPhases","element","rect","JSON","parse","stringify","getBoundingClientRect","x","y","getWindow","node","ownerDocument","hasOwnProperty","defaultView","window","getWindowScroll","win","scrollLeft","pageXOffset","scrollTop","pageYOffset","isElement","OwnElement","Element","isHTMLElement","HTMLElement","isShadowRoot","ShadowRoot","getHTMLElementScroll","getNodeScroll","scrollParents","scroll","scrollParent","nodeScroll","contextElement","elementOrVirtualElement","commonOffsetParent","isFixed","unwrapVirtualElement","offsetParentRect","offsetParentScrollSum","getScrollSum","width","height","offsetLeft","offsetTop","offsetWidth","offsetHeight","nodeName","toLowerCase","getNodeName","parentNode","host","document","documentElement","getComputedStyle","getScrollParent","includes","body","overflow","overflowX","overflowY","test","getParentNode","listScrollParents","list","isBody","target","updatedList","styles","parseFloat","marginTop","marginRight","marginBottom","marginLeft","margins","getElementMargins","getTrueOffsetParent","offsetParent","getOffsetParent","isTableElement","position","isOffsetContainer","firstElementChild","getRoot","getCommonOffsetParent","element1","element2","element1root","element2root","order","compareDocumentPosition","Node","DOCUMENT_POSITION_FOLLOWING","range","createRange","setStart","setEnd","commonAncestorContainer","modifiers","map","Map","visited","Set","result","forEach","modifier","set","name","sort","add","requires","optionallyRequires","dep","has","depModifier","get","push","orderedModifiers","phase","filter","microtaskDebounce","fn","pending","Promise","resolve","then","undefined","str","args","p","c","replace","INVALID_MODIFIER_ERROR","MISSING_DEPENDENCY_ERROR","VALID_PROPERTIES","Object","keys","key","console","error","format","String","enabled","join","onLoad","onDestroy","Array","isArray","s","requirement","find","mod","INVALID_ELEMENT_ERROR","INFINITE_LOOP_ERROR","areValidElements","some","defaultOptionsValue","strategy","popperGenerator","generatorOptions","defaultModifiers","defaultOptions","createPopper","reference","popper","options","referenceElement","unwrapJqueryElement","popperElement","state","modifiersData","elements","attributes","instance","setOptions","orderModifiers","defaultModifier","validateModifiers","forceUpdate","measures","getCompositeRect","addClientRectMargins","getLayoutRect","reset","prevPlacement","data","__debug_loops__","index","length","update","debounce","destroy"],"mappings":"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"}