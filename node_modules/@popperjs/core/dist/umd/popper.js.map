{"version":3,"file":"popper.js","sources":["../../src/enums.js","../../src/dom-utils/getBoundingClientRect.js","../../src/dom-utils/getWindow.js","../../src/dom-utils/getWindowScroll.js","../../src/dom-utils/instanceOf.js","../../src/dom-utils/getHTMLElementScroll.js","../../src/dom-utils/getNodeScroll.js","../../src/dom-utils/getScrollSum.js","../../src/dom-utils/unwrapVirtualElement.js","../../src/dom-utils/getCompositeRect.js","../../src/dom-utils/getLayoutRect.js","../../src/dom-utils/getNodeName.js","../../src/dom-utils/getParentNode.js","../../src/dom-utils/getComputedStyle.js","../../src/dom-utils/getScrollParent.js","../../src/dom-utils/listScrollParents.js","../../src/dom-utils/getElementMargins.js","../../src/dom-utils/addClientRectMargins.js","../../src/dom-utils/isTableElement.js","../../src/dom-utils/getOffsetParent.js","../../src/dom-utils/getCommonOffsetParent.js","../../src/utils/unwrapJqueryElement.js","../../src/utils/orderModifiers.js","../../src/utils/debounce.js","../../src/utils/format.js","../../src/utils/validateModifiers.js","../../src/index.js","../../src/modifiers/eventListeners.js","../../src/utils/getBasePlacement.js","../../src/utils/getVariationPlacement.js","../../src/utils/getMainAxisFromPlacement.js","../../src/utils/computeOffsets.js","../../src/modifiers/popperOffsets.js","../../src/dom-utils/getViewportRect.js","../../src/dom-utils/getDocumentElement.js","../../src/dom-utils/getDocumentRect.js","../../src/utils/rectToClientRect.js","../../src/dom-utils/getClippingRect.js","../../src/modifiers/detectOverflow.js","../../src/modifiers/computeStyles.js","../../src/modifiers/applyStyles.js","../../src/modifiers/offset.js","../../src/utils/getOppositePlacement.js","../../src/utils/mergePaddingObject.js","../../src/utils/expandToHashMap.js","../../src/modifiers/flip.js","../../src/utils/getAltAxis.js","../../src/utils/within.js","../../src/modifiers/preventOverflow.js","../../src/modifiers/arrow.js","../../src/popper.js"],"sourcesContent":["// @flow\nexport const top: 'top' = 'top';\nexport const bottom: 'bottom' = 'bottom';\nexport const right: 'right' = 'right';\nexport const left: 'left' = 'left';\nexport const auto: 'auto' = 'auto';\nexport type BasePlacement =\n  | typeof top\n  | typeof bottom\n  | typeof right\n  | typeof left;\nexport const basePlacements: Array<BasePlacement> = [top, bottom, right, left];\n\nexport const start: 'start' = 'start';\nexport const end: 'end' = 'end';\nexport type VariationPlacement = typeof start | typeof end;\n\nexport const center: 'center' = 'center';\nexport const edges: 'edges' = 'edges';\nexport const surfaces: 'surfaces' = 'surfaces';\nexport type Tether = false | typeof center | typeof edges | typeof surfaces;\n\nexport const clippingParents: 'clippingParents' = 'clippingParents';\nexport const viewport: 'viewport' = 'viewport';\nexport type OverflowArea =\n  | HTMLElement\n  | typeof clippingParents\n  | typeof viewport;\nexport type RootOverflowArea = typeof viewport | 'document';\n\nexport const popper: 'popper' = 'popper';\nexport const reference: 'reference' = 'reference';\nexport type Context = typeof popper | typeof reference;\n\nexport type Placement =\n  | 'auto'\n  | 'auto-start'\n  | 'auto-end'\n  | 'top'\n  | 'top-start'\n  | 'top-end'\n  | 'bottom'\n  | 'bottom-start'\n  | 'bottom-end'\n  | 'right'\n  | 'right-start'\n  | 'right-end'\n  | 'left'\n  | 'left-start'\n  | 'left-end';\n\nexport const placements: Array<Placement> = basePlacements.reduce(\n  (acc: Array<Placement>, placement: BasePlacement): Array<Placement> =>\n    acc.concat([\n      placement,\n      (`${placement}-${start}`: any),\n      (`${placement}-${end}`: any),\n    ]),\n  []\n);\n\n// modifiers that need to read the DOM\nexport const beforeRead: 'beforeRead' = 'beforeRead';\nexport const read: 'read' = 'read';\nexport const afterRead: 'afterRead' = 'afterRead';\n// pure-logic modifiers\nexport const beforeMain: 'beforeMain' = 'beforeMain';\nexport const main: 'main' = 'main';\nexport const afterMain: 'afterMain' = 'afterMain';\n// modifier with the purpose to write to the DOM (or write into a framework state)\nexport const beforeWrite: 'beforeWrite' = 'beforeWrite';\nexport const write: 'write' = 'write';\nexport const afterWrite: 'afterWrite' = 'afterWrite';\nexport const modifierPhases: Array<ModifierPhases> = [\n  beforeRead,\n  read,\n  afterRead,\n  beforeMain,\n  main,\n  afterMain,\n  beforeWrite,\n  write,\n  afterWrite,\n];\n\nexport type ModifierPhases =\n  | typeof beforeRead\n  | typeof read\n  | typeof afterRead\n  | typeof beforeMain\n  | typeof main\n  | typeof afterMain\n  | typeof beforeWrite\n  | typeof write\n  | typeof afterWrite;\n","// @flow\nimport type { ClientRectObject, VirtualElement } from '../types';\n\nexport default (element: Element | VirtualElement): ClientRectObject => {\n  const rect = JSON.parse(JSON.stringify(element.getBoundingClientRect()));\n  rect.x = rect.left;\n  rect.y = rect.top;\n  return rect;\n};\n","// @flow\nexport default function getWindow(node: mixed) {\n  const ownerDocument: ?Document =\n    node != null &&\n    typeof node === 'object' &&\n    node.hasOwnProperty('ownerDocument')\n      ? // $FlowFixMe: assume ownerDocument to be the one we are looking for\n        node.ownerDocument\n      : null;\n  return ownerDocument != null ? ownerDocument.defaultView : window;\n}\n","// @flow\nimport getWindow from './getWindow';\n\nexport default function getWindowScroll(node: Node) {\n  const win = getWindow(node);\n  const scrollLeft = win.pageXOffset;\n  const scrollTop = win.pageYOffset;\n  return { scrollLeft, scrollTop };\n}\n","// @flow\nimport getWindow from './getWindow';\n\n/*:: declare function isElement(node: mixed): boolean %checks(node instanceof\n  Element); */\n\nfunction isElement(node) {\n  const OwnElement = getWindow(node).Element;\n  return node instanceof OwnElement;\n}\n\n/*:: declare function isHTMLElement(node: mixed): boolean %checks(node instanceof\n  HTMLElement); */\n\nfunction isHTMLElement(node) {\n  const OwnElement = getWindow(node).HTMLElement;\n  return node instanceof OwnElement;\n}\n\n/*:: declare function isShadowRoot(node: mixed): boolean %checks(node instanceof\n  ShadowRoot); */\n\nfunction isShadowRoot(node) {\n  const OwnElement = getWindow(node).ShadowRoot;\n  return node instanceof OwnElement;\n}\n\nexport { isElement, isHTMLElement, isShadowRoot };\n","// @flow\n\nexport default function getHTMLElementScroll(element: HTMLElement) {\n  return {\n    scrollLeft: element.scrollLeft,\n    scrollTop: element.scrollTop,\n  };\n}\n","// @flow\nimport getWindowScroll from './getWindowScroll';\nimport getWindow from './getWindow';\nimport { isHTMLElement } from './instanceOf';\nimport getHTMLElementScroll from './getHTMLElementScroll';\n\nexport default function getNodeScroll(node: Node) {\n  if (node === getWindow(node) || !isHTMLElement(node)) {\n    return getWindowScroll(node);\n  } else {\n    return getHTMLElementScroll(node);\n  }\n}\n","// @flow\nimport getNodeScroll from './getNodeScroll';\n\nexport default (scrollParents: Array<Element>) =>\n  scrollParents.reduce(\n    (scroll, scrollParent) => {\n      const nodeScroll = getNodeScroll(scrollParent);\n      scroll.scrollTop += nodeScroll.scrollTop;\n      scroll.scrollLeft += nodeScroll.scrollLeft;\n      return scroll;\n    },\n    { scrollTop: 0, scrollLeft: 0 }\n  );\n","// @flow\nimport type { VirtualElement } from '../types';\nimport { isElement } from './instanceOf';\n\nexport default (element: Element | VirtualElement): Element => {\n  return isElement(element) ? element : element.contextElement;\n};\n","// @flow\nimport type { Rect, VirtualElement } from '../types';\nimport getBoundingClientRect from './getBoundingClientRect';\nimport getScrollSum from './getScrollSum';\nimport unwrapVirtualElement from './unwrapVirtualElement';\nimport { isElement } from './instanceOf';\n\n// Returns the composite rect of an element relative to its offsetParent.\n// Composite means it takes into account transforms as well as layout.\nexport default (\n  elementOrVirtualElement: Element | VirtualElement,\n  commonOffsetParent: Element,\n  isFixed: boolean = false\n): Rect => {\n  const element = unwrapVirtualElement(elementOrVirtualElement);\n  const rect = getBoundingClientRect(element);\n  const offsetParentRect =\n    isElement(commonOffsetParent) && !isFixed\n      ? getBoundingClientRect(commonOffsetParent)\n      : { left: 0, top: 0 };\n  const offsetParentScrollSum = getScrollSum(\n    isFixed ? [] : [commonOffsetParent]\n  );\n\n  const width = rect.width;\n  const height = rect.height;\n  const x =\n    rect.left + offsetParentScrollSum.scrollLeft - offsetParentRect.left;\n  const y = rect.top + offsetParentScrollSum.scrollTop - offsetParentRect.top;\n\n  return { width, height, x, y };\n};\n","// @flow\nimport type { Rect } from '../types';\n\n// Returns the layout rect of an element relative to its offsetParent. Layout\n// means it doesn't take into account transforms.\nexport default (element: HTMLElement): Rect => ({\n  x: element.offsetLeft,\n  y: element.offsetTop,\n  width: element.offsetWidth,\n  height: element.offsetHeight,\n});\n","// @flow\n\nexport default (element: ?Node): ?string =>\n  element ? (element.nodeName || '').toLowerCase() : null;\n","// @flow\nimport getNodeName from './getNodeName';\n\nexport default (element: Node | ShadowRoot): Node => {\n  if (getNodeName(element) === 'html') {\n    // DocumentElement detectedF\n    return element;\n  }\n  return (\n    element.parentNode || // DOM Element detected\n    // $FlowFixMe: need a better way to handle this...\n    element.host || // ShadowRoot detected\n    document.ownerDocument || // Fallback to ownerDocument if available\n    document.documentElement // Or to documentElement if everything else fails\n  );\n};\n","// @flow\nimport getWindow from './getWindow';\n\nexport default function getComputedStyle(\n  element: Element\n): CSSStyleDeclaration {\n  return getWindow(element).getComputedStyle(element);\n}\n","// @flow\nimport getParentNode from './getParentNode';\nimport getComputedStyle from './getComputedStyle';\nimport getNodeName from './getNodeName';\nimport { isHTMLElement } from './instanceOf';\n\nexport default function getScrollParent(node: Node): HTMLElement {\n  if (['html', 'body', '#document'].includes(getNodeName(node))) {\n    return node.ownerDocument.body;\n  }\n\n  if (isHTMLElement(node)) {\n    // Firefox want us to check `-x` and `-y` variations as well\n    const { overflow, overflowX, overflowY } = getComputedStyle(node);\n    if (/(auto|scroll|overlay)/.test(overflow + overflowY + overflowX)) {\n      return node;\n    }\n  }\n\n  return getScrollParent(getParentNode(node));\n}\n","// @flow\nimport getScrollParent from './getScrollParent';\nimport getParentNode from './getParentNode';\nimport getNodeName from './getNodeName';\nimport getWindow from './getWindow';\n\nexport default function listScrollParents(\n  element: Node,\n  list: Array<Element> = []\n): Array<Element> {\n  const scrollParent = getScrollParent(element);\n  const isBody = getNodeName(scrollParent) === 'body';\n  const target = isBody ? getWindow(scrollParent) : scrollParent;\n  const updatedList = list.concat(target);\n  return isBody\n    ? updatedList\n    : updatedList.concat(listScrollParents(getParentNode(target)));\n}\n","// @flow\nimport getComputedStyle from './getComputedStyle';\n\nexport default (element: HTMLElement) => {\n  // get the element margins, we need them to properly align the popper\n  const styles = getComputedStyle(element);\n\n  const top = parseFloat(styles.marginTop) || 0;\n  const right = parseFloat(styles.marginRight) || 0;\n  const bottom = parseFloat(styles.marginBottom) || 0;\n  const left = parseFloat(styles.marginLeft) || 0;\n\n  return { top, right, bottom, left };\n};\n","// @flow\nimport type { Rect } from '../types';\nimport getElementMargins from './getElementMargins';\n\nexport default (rect: Rect, element: HTMLElement): Rect => {\n  const margins = getElementMargins(element);\n\n  return {\n    width: rect.width + margins.left + margins.right,\n    height: rect.height + margins.top + margins.bottom,\n    y: rect.y - margins.top,\n    x: rect.x - margins.left,\n  };\n};\n","// @flow\nimport getNodeName from './getNodeName';\n\nexport default (element: Element): boolean =>\n  ['table', 'td', 'th'].includes(getNodeName(element));\n","// @flow\nimport getWindow from './getWindow';\nimport getNodeName from './getNodeName';\nimport getComputedStyle from './getComputedStyle';\nimport { isHTMLElement } from './instanceOf';\nimport isTableElement from './isTableElement';\n\nconst getTrueOffsetParent = (element: Element): ?Element =>\n  isHTMLElement(element) ? element.offsetParent : null;\n\nexport default function getOffsetParent(element: Element) {\n  const window = getWindow(element);\n\n  let offsetParent = getTrueOffsetParent(element);\n\n  // Find the nearest non-table offsetParent\n  while (offsetParent && isTableElement(offsetParent)) {\n    offsetParent = getTrueOffsetParent(offsetParent);\n  }\n\n  if (\n    offsetParent &&\n    getNodeName(offsetParent) === 'body' &&\n    getComputedStyle(offsetParent).position === 'static'\n  ) {\n    return window;\n  }\n\n  return offsetParent || window;\n}\n","// @flow\nimport getOffsetParent from './getOffsetParent';\nimport { isElement, isShadowRoot } from './instanceOf';\nimport getWindow from './getWindow';\n\nfunction isOffsetContainer(element: Element): boolean {\n  const firstElementChild = element.firstElementChild;\n  return !firstElementChild || getOffsetParent(firstElementChild) === element;\n}\n\nfunction getRoot(node: Node): Node {\n  const parentNode = node.parentNode;\n\n  if (parentNode != null) {\n    return getRoot(parentNode);\n  }\n\n  return node;\n}\n\nexport default function getCommonOffsetParent(\n  element1: Element,\n  element2: Element\n): Element {\n  // If one of the nodes is inside shadowDOM, find which one\n  const element1root = getRoot(element1);\n  const element2root = getRoot(element2);\n\n  if (isShadowRoot(element1root)) {\n    return getCommonOffsetParent(element1root.host, element2);\n  } else if (isShadowRoot(element2root)) {\n    return getCommonOffsetParent(element1, element2root.host);\n  }\n\n  // Here we make sure to give as \"start\" the element that comes first in the DOM\n  const order =\n    element1.compareDocumentPosition(element2) &\n    Node.DOCUMENT_POSITION_FOLLOWING;\n  const start = order ? element1 : element2;\n  const end = order ? element2 : element1;\n\n  // Both nodes are inside #document\n  // Get common ancestor container\n  const range = document.createRange();\n  range.setStart(start, 0);\n  range.setEnd(end, 0);\n  const commonAncestorContainer = range.commonAncestorContainer;\n\n  // If ancestor container is not an element, we must return a safe\n  // fallback, body is a good bet\n  if (!isElement(commonAncestorContainer)) {\n    return getWindow(commonAncestorContainer).body;\n  }\n\n  // if ancestor container is also an offset container, we found our winner\n  if (isOffsetContainer(commonAncestorContainer)) {\n    return commonAncestorContainer;\n  }\n\n  return getOffsetParent(commonAncestorContainer);\n}\n","// @flow\nimport type { JQueryWrapper } from '../types';\n\nexport default (element: HTMLElement | JQueryWrapper): HTMLElement =>\n  // $FlowFixMe: need to get type refinement work\n  element.hasOwnProperty('jquery') ? element[0] : element;\n","// @flow\nimport type { Modifier } from '../types';\nimport { modifierPhases } from '../enums';\n\n// source: https://stackoverflow.com/questions/49875255\nconst order = modifiers => {\n  const map = new Map();\n  const visited = new Set();\n  const result = [];\n\n  modifiers.forEach(modifier => {\n    map.set(modifier.name, modifier);\n  });\n\n  // On visiting object, check for its dependencies and visit them recursively\n  function sort(modifier: Modifier<any>) {\n    visited.add(modifier.name);\n\n    const requires = [\n      ...(modifier.requires || []),\n      ...(modifier.optionallyRequires || []),\n    ];\n\n    requires.forEach(dep => {\n      if (!visited.has(dep)) {\n        const depModifier = map.get(dep);\n\n        if (depModifier) {\n          sort(depModifier);\n        }\n      }\n    });\n\n    result.push(modifier);\n  }\n\n  modifiers.forEach(modifier => {\n    if (!visited.has(modifier.name)) {\n      // check for visited object\n      sort(modifier);\n    }\n  });\n\n  return result;\n};\n\nexport default (modifiers: Array<Modifier<any>>): Array<Modifier<any>> => {\n  // order based on dependencies\n  const orderedModifiers = order(modifiers);\n\n  // order based on phase\n  return modifierPhases.reduce((acc, phase) => {\n    return acc.concat(\n      orderedModifiers.filter(modifier => modifier.phase === phase)\n    );\n  }, []);\n};\n","// @flow\nexport default function microtaskDebounce(fn: Function) {\n  let pending;\n  return () => {\n    if (!pending) {\n      pending = new Promise<void>(resolve => {\n        Promise.resolve().then(() => {\n          pending = undefined;\n          resolve(fn());\n        });\n      });\n    }\n\n    return pending;\n  };\n}\n","// @flow\nexport default (str: string, ...args: Array<string>) =>\n  [...args].reduce((p, c) => p.replace(/%s/, c), str);\n","// @flow\nimport format from './format';\nimport { modifierPhases } from '../enums';\n\nconst INVALID_MODIFIER_ERROR =\n  'Popper: modifier \"%s\" provided an invalid %s property, expected %s but got %s';\nconst MISSING_DEPENDENCY_ERROR =\n  'Popper: modifier \"%s\" requires \"%s\", but \"%s\" modifier is not available';\nconst VALID_PROPERTIES = [\n  'name',\n  'enabled',\n  'phase',\n  'fn',\n  'onLoad',\n  'requires',\n  'options',\n];\n\nexport default (modifiers: Array<any>): void => {\n  modifiers.forEach(modifier => {\n    Object.keys(modifier).forEach(key => {\n      switch (key) {\n        case 'name':\n          if (typeof modifier.name !== 'string') {\n            console.error(\n              format(\n                INVALID_MODIFIER_ERROR,\n                String(modifier.name),\n                '\"name\"',\n                '\"string\"',\n                `\"${String(modifier.name)}\"`\n              )\n            );\n          }\n          break;\n        case 'enabled':\n          if (typeof modifier.enabled !== 'boolean') {\n            console.error(\n              format(\n                INVALID_MODIFIER_ERROR,\n                modifier.name,\n                '\"enabled\"',\n                '\"boolean\"',\n                `\"${String(modifier.enabled)}\"`\n              )\n            );\n          }\n        case 'phase':\n          if (!modifierPhases.includes(modifier.phase)) {\n            console.error(\n              format(\n                INVALID_MODIFIER_ERROR,\n                modifier.name,\n                '\"phase\"',\n                `either ${modifierPhases.join(', ')}`,\n                `\"${String(modifier.phase)}\"`\n              )\n            );\n          }\n          break;\n        case 'fn':\n          if (typeof modifier.fn !== 'function') {\n            console.error(\n              format(\n                INVALID_MODIFIER_ERROR,\n                modifier.name,\n                '\"fn\"',\n                '\"function\"',\n                `\"${String(modifier.fn)}\"`\n              )\n            );\n          }\n          break;\n        case 'onLoad':\n          if (typeof modifier.onLoad !== 'function') {\n            console.error(\n              format(\n                INVALID_MODIFIER_ERROR,\n                modifier.name,\n                '\"onLoad\"',\n                '\"function\"',\n                `\"${String(modifier.fn)}\"`\n              )\n            );\n          }\n          break;\n        case 'onDestroy':\n          if (typeof modifier.onDestroy !== 'function') {\n            console.error(\n              format(\n                INVALID_MODIFIER_ERROR,\n                modifier.name,\n                '\"onDestroy\"',\n                '\"function\"',\n                `\"${String(modifier.fn)}\"`\n              )\n            );\n          }\n          break;\n        case 'requires':\n          if (!Array.isArray(modifier.requires)) {\n            console.error(\n              format(\n                INVALID_MODIFIER_ERROR,\n                modifier.name,\n                '\"requires\"',\n                '\"array\"',\n                `\"${String(modifier.requires)}\"`\n              )\n            );\n          }\n          break;\n        case 'optionallyRequires':\n          if (!Array.isArray(modifier.requires)) {\n            console.error(\n              format(\n                INVALID_MODIFIER_ERROR,\n                modifier.name,\n                '\"requires\"',\n                '\"array\"',\n                `\"${String(modifier.requires)}\"`\n              )\n            );\n          }\n          break;\n        case 'options':\n        case 'data':\n          break;\n        default:\n          console.error(\n            `PopperJS: an invalid property has been provided to the \"${\n              modifier.name\n            }\" modifier, valid properties are ${VALID_PROPERTIES.map(\n              s => `\"${s}\"`\n            ).join(', ')}; but \"${key}\" was provided.`\n          );\n      }\n\n      modifier.requires &&\n        modifier.requires.forEach(requirement => {\n          if (modifiers.find(mod => mod.name === requirement) == null) {\n            console.error(\n              format(\n                MISSING_DEPENDENCY_ERROR,\n                String(modifier.name),\n                requirement,\n                requirement\n              )\n            );\n          }\n        });\n    });\n  });\n};\n","// @flow\nimport type {\n  JQueryWrapper,\n  State,\n  Options,\n  Modifier,\n  Instance,\n} from './types';\n\nexport * from './types';\nexport * from './enums';\n\n// DOM Utils\nimport getCompositeRect from './dom-utils/getCompositeRect';\nimport getLayoutRect from './dom-utils/getLayoutRect';\nimport listScrollParents from './dom-utils/listScrollParents';\nimport addClientRectMargins from './dom-utils/addClientRectMargins';\nimport getCommonOffsetParent from './dom-utils/getCommonOffsetParent';\nimport unwrapVirtualElement from './dom-utils/unwrapVirtualElement';\n\n// Pure Utils\nimport unwrapJqueryElement from './utils/unwrapJqueryElement';\nimport orderModifiers from './utils/orderModifiers';\nimport debounce from './utils/debounce';\nimport validateModifiers from './utils/validateModifiers';\n\nconst INVALID_ELEMENT_ERROR =\n  'Popper: Invalid reference or popper argument provided to Popper, they must be either a valid DOM element, virtual element, or a jQuery-wrapped DOM element.';\nconst INFINITE_LOOP_ERROR =\n  'Popper: An infinite loop in the modifiers cycle has been detected! The cycle has been interrupted to prevent a browser crash.';\n\nconst areValidElements = (...args: Array<any>): boolean =>\n  !args.some(\n    element => !(element && typeof element.getBoundingClientRect === 'function')\n  );\n\nconst defaultOptionsValue: Options = {\n  placement: 'bottom',\n  modifiers: [],\n  strategy: 'absolute',\n};\n\ntype PopperGeneratorArgs = {\n  defaultModifiers?: Array<Modifier<any>>,\n  defaultOptions?: $Shape<Options>,\n};\n\nexport function popperGenerator(generatorOptions: PopperGeneratorArgs = {}) {\n  const {\n    defaultModifiers = [],\n    defaultOptions = defaultOptionsValue,\n  } = generatorOptions;\n\n  return function createPopper(\n    reference: HTMLElement | JQueryWrapper,\n    popper: HTMLElement | JQueryWrapper,\n    options: $Shape<Options> = defaultOptions\n  ): Instance {\n    // Unwrap `reference` and `popper` elements in case they are\n    // wrapped by jQuery, otherwise consume them as is\n    const referenceElement = unwrapJqueryElement(reference);\n    const popperElement = unwrapJqueryElement(popper);\n\n    let state: $Shape<State> = {\n      placement: 'bottom',\n      orderedModifiers: [],\n      options: { ...defaultOptionsValue, ...defaultOptions },\n      modifiersData: {},\n      elements: {\n        reference: referenceElement,\n        popper: popperElement,\n      },\n      attributes: {},\n      styles: {},\n    };\n\n    const instance = {\n      setOptions(options) {\n        // Store options into state\n        state.options = {\n          ...defaultOptions,\n          ...options,\n        };\n\n        state.scrollParents = {\n          reference: listScrollParents(referenceElement),\n          popper: listScrollParents(popperElement),\n        };\n\n        // Order `options.modifiers` so that the dependencies are fulfilled\n        // once the modifiers are executed\n        state.orderedModifiers = orderModifiers([\n          ...state.options.modifiers.filter(\n            modifier =>\n              !defaultModifiers.find(({ name }) => name === modifier.name)\n          ),\n          ...defaultModifiers.map(defaultModifier => ({\n            ...defaultModifier,\n            ...state.options.modifiers.find(\n              ({ name }) => name === defaultModifier.name\n            ),\n          })),\n        ]);\n\n        // Validate the provided modifiers so that the consumer will get warned\n        // if one of the custom modifiers is invalid for any reason\n        if (__DEV__) {\n          validateModifiers(state.orderedModifiers);\n        }\n      },\n      // Syncronous and forcefully executed update\n      // it will always be executed even if not necessary, usually NOT needed\n      // use Popper#update instead\n      forceUpdate() {\n        const {\n          reference: referenceElement,\n          popper: popperElement,\n        } = state.elements;\n        // Don't proceed if `reference` or `popper` are not valid elements anymore\n        if (!areValidElements(referenceElement, popperElement)) {\n          if (__DEV__) {\n            console.error(INVALID_ELEMENT_ERROR);\n          }\n          return;\n        }\n\n        const isFixed = state.options.strategy === 'fixed';\n\n        // Get initial measurements\n        // these are going to be used to compute the initial popper offsets\n        // and as cache for any modifier that needs them later\n        state.measures = {\n          reference: getCompositeRect(\n            referenceElement,\n            getCommonOffsetParent(\n              unwrapVirtualElement(referenceElement),\n              popperElement\n            ),\n            isFixed\n          ),\n          // CSS marginsc an be applied to popper elements to quickly\n          // apply offsets dynamically based on some CSS selectors.\n          // For this reason we include margins in this calculation.\n          popper: addClientRectMargins(\n            getLayoutRect(popperElement),\n            popperElement\n          ),\n        };\n\n        // Modifiers have the ability to read the current Popper state, included\n        // the popper offsets, and modify it to address specifc cases\n        state.reset = false;\n\n        // Cache the placement in cache to make it available to the modifiers\n        // modifiers will modify this one (rather than the one in options)\n        const prevPlacement = state.placement;\n        state.placement = state.options.placement;\n\n        state.orderedModifiers.forEach(\n          modifier =>\n            (state.modifiersData[modifier.name] = {\n              ...modifier.data,\n            })\n        );\n\n        let __debug_loops__ = 0;\n        for (let index = 0; index < state.orderedModifiers.length; index++) {\n          if (__DEV__) {\n            __debug_loops__ += 1;\n            if (__debug_loops__ > 100) {\n              console.error(INFINITE_LOOP_ERROR);\n              break;\n            }\n          }\n\n          if (state.reset === true) {\n            state.reset = false;\n            index = -1;\n            continue;\n          }\n\n          const { fn, enabled, options = {}, name } = state.orderedModifiers[\n            index\n          ];\n\n          if (enabled && typeof fn === 'function') {\n            state = fn({ state, options, name, instance });\n          }\n        }\n\n        // Prevents a jitter if elements' size changes based on placement.\n        // This is separate from and does not solve the \"flip flicker\" issue.\n        // We can't know ahead of time (before the placement gets written to the\n        // DOM) what size the element will be due to conditionally applied/\n        // computed CSS based on placement (e.g. margins on arrow)\n        if (prevPlacement !== state.placement) {\n          instance.forceUpdate();\n        }\n      },\n\n      // Async and optimistically optimized update\n      // it will not be executed if not necessary\n      // debounced, so that it only runs at most once-per-tick\n      update: debounce(\n        () =>\n          // prettier-ignore\n          new Promise<$Shape<State>>(resolve => {\n          instance.forceUpdate();\n          resolve(state);\n        })\n      ),\n\n      destroy() {\n        // Run `onDestroy` modifier methods\n        state.orderedModifiers.forEach(\n          ({ onDestroy, enabled, name, options = {} }) =>\n            enabled &&\n            onDestroy &&\n            onDestroy({ state, name, instance, options })\n        );\n      },\n    };\n\n    // Don't proceed if `reference` or `popper` are invalid elements\n    if (!areValidElements(referenceElement, popperElement)) {\n      if (__DEV__) {\n        console.error(INVALID_ELEMENT_ERROR);\n      }\n      return instance;\n    }\n\n    instance.setOptions(options);\n\n    // Modifiers have the opportunity to execute some arbitrary code before\n    // the first update cycle is ran, the order of execution will be the same\n    // defined by the modifier dependencies directive.\n    // The `onLoad` function may add or alter the options of themselves\n    state.orderedModifiers.forEach(\n      ({ onLoad, enabled, name, options = {} }) =>\n        enabled &&\n        onLoad &&\n        (state =\n          onLoad({\n            state,\n            name,\n            instance,\n            options,\n          }) || state)\n    );\n\n    instance.update();\n\n    return instance;\n  };\n}\n\nexport const createPopper = popperGenerator();\n","// @flow\nimport type { ModifierArguments, Modifier } from '../types';\nimport getWindow from '../dom-utils/getWindow';\ntype Options = { scroll: boolean, resize: boolean };\n\nconst passive = { passive: true };\n\nfunction toggleEventListeners({ state, instance, scroll, resize }) {\n  if (scroll != null) {\n    const scrollParents = [\n      ...state.scrollParents.reference,\n      ...state.scrollParents.popper,\n    ];\n\n    scrollParents.forEach(scrollParent =>\n      scroll\n        ? scrollParent.addEventListener('scroll', instance.update, passive)\n        : scrollParent.removeEventListener('scroll', instance.update)\n    );\n  }\n\n  if (resize != null) {\n    const window = getWindow(state.elements.popper);\n    resize\n      ? window.addEventListener('resize', instance.update, passive)\n      : window.removeEventListener('resize', instance.update);\n  }\n}\n\nfunction onLoad({\n  state,\n  instance,\n  name,\n  options,\n}: ModifierArguments<Options>) {\n  const { scroll = true, resize = true } = options;\n\n  // cache initial options so we can compare them later\n  state.modifiersData[`${name}#persistent`] = { scroll, resize };\n\n  toggleEventListeners({ state, instance, scroll, resize });\n\n  return state;\n}\n\nfunction onDestroy({ state, instance }: ModifierArguments<Options>) {\n  toggleEventListeners({ state, instance, scroll: false, resize: false });\n}\n\nfunction update({\n  state,\n  options,\n  instance,\n  name,\n}: ModifierArguments<Options>) {\n  const data = state.modifiersData[`${name}#persistent`];\n  let { scroll = true, resize = true } = options;\n\n  // set options to `null` if they didn't change, so we know not to run any logic\n  if (data.scroll === scroll) {\n    scroll = null;\n  }\n  if (data.resize === resize) {\n    resize = null;\n  }\n\n  // Update cache\n  state.modifiersData[`${name}#persistent`] = { scroll, resize };\n\n  toggleEventListeners({ state, instance, scroll, resize });\n\n  return state;\n}\n\nexport default ({\n  name: 'eventListeners',\n  enabled: true,\n  phase: 'write',\n  fn: update,\n  onLoad,\n  onDestroy,\n  data: {},\n}: Modifier<Options>);\n","// @flow\nimport { type BasePlacement, type Placement, auto } from '../enums';\n\nexport default (placement: Placement | typeof auto): BasePlacement =>\n  (placement.split('-')[0]: any);\n","// @flow\nimport { type VariationPlacement, type Placement, auto } from '../enums';\n\nexport default (placement: Placement | typeof auto): ?VariationPlacement =>\n  (placement.split('-')[1]: any);\n","// @flow\nimport type { Placement } from '../enums';\nexport default (placement: Placement): 'x' | 'y' =>\n  ['top', 'bottom'].includes(placement) ? 'x' : 'y';\n","// @flow\nimport getBasePlacement from './getBasePlacement';\nimport getVariationPlacement from './getVariationPlacement';\nimport getMainAxisFromPlacement from './getMainAxisFromPlacement';\nimport type {\n  Rect,\n  PositioningStrategy,\n  Offsets,\n  ClientRectObject,\n} from '../types';\nimport { top, right, bottom, left, start, end, type Placement } from '../enums';\n\nexport default ({\n  reference,\n  element,\n  placement,\n}: {\n  reference: Rect | ClientRectObject,\n  element: Rect | ClientRectObject,\n  strategy: PositioningStrategy,\n  placement?: Placement,\n}): Offsets => {\n  const basePlacement = placement ? getBasePlacement(placement) : null;\n  const variationPlacement = placement\n    ? getVariationPlacement(placement)\n    : null;\n\n  let offsets;\n  switch (basePlacement) {\n    case top:\n      offsets = {\n        x: reference.x + reference.width / 2 - element.width / 2,\n        y: reference.y - element.height,\n      };\n      break;\n    case bottom:\n      offsets = {\n        x: reference.x + reference.width / 2 - element.width / 2,\n        y: reference.y + reference.height,\n      };\n      break;\n    case right:\n      offsets = {\n        x: reference.x + reference.width,\n        y: reference.y + reference.height / 2 - element.height / 2,\n      };\n      break;\n    case left:\n      offsets = {\n        x: reference.x - element.width,\n        y: reference.y + reference.height / 2 - element.height / 2,\n      };\n      break;\n    default:\n      offsets = {\n        x: reference.x,\n        y: reference.y,\n      };\n  }\n\n  const mainAxis = basePlacement\n    ? getMainAxisFromPlacement(basePlacement)\n    : null;\n\n  if (mainAxis != null) {\n    const len = mainAxis === 'y' ? 'height' : 'width';\n\n    switch (variationPlacement) {\n      case start:\n        offsets[mainAxis] =\n          Math.floor(offsets[mainAxis]) -\n          Math.floor(reference[len] / 2 - element[len] / 2);\n        break;\n      case end:\n        offsets[mainAxis] =\n          Math.floor(offsets[mainAxis]) +\n          Math.ceil(reference[len] / 2 - element[len] / 2);\n        break;\n      default:\n    }\n  }\n\n  return offsets;\n};\n","// @flow\nimport type { ModifierArguments, Modifier } from '../types';\nimport computeOffsets from '../utils/computeOffsets';\n\nfunction popperOffsets({ state, name }: ModifierArguments<{||}>) {\n  // Offsets are the actual position the popper needs to have to be\n  // properly positioned near its reference element\n  // This is the most basic placement, and will be adjusted by\n  // the modifiers in the next step\n  state.modifiersData[name] = computeOffsets({\n    reference: state.measures.reference,\n    element: state.measures.popper,\n    strategy: 'absolute',\n    placement: state.placement,\n  });\n\n  return state;\n}\n\nexport default ({\n  name: 'popperOffsets',\n  enabled: true,\n  phase: 'read',\n  fn: popperOffsets,\n  data: {},\n}: Modifier<{||}>);\n","// @flow\nimport getWindow from './getWindow';\n\nexport default (element: Element) => {\n  const win = getWindow(element);\n  return {\n    width: win.innerWidth,\n    height: win.innerHeight,\n    x: 0,\n    y: 0,\n  };\n};\n","// @flow\nexport default (element: Element): HTMLElement =>\n  element.ownerDocument.documentElement;\n","// @flow\nimport getCompositeRect from './getCompositeRect';\nimport getWindow from './getWindow';\nimport getDocumentElement from './getDocumentElement';\nimport getWindowScroll from './getWindowScroll';\n\nexport default (element: HTMLElement) => {\n  const win = getWindow(element);\n  const winScroll = getWindowScroll(element);\n  const documentRect = getCompositeRect(getDocumentElement(element), win);\n\n  documentRect.height = Math.max(documentRect.height, win.innerHeight);\n  documentRect.width = Math.max(documentRect.width, win.innerWidth);\n  documentRect.x = -winScroll.scrollLeft;\n  documentRect.y = -winScroll.scrollTop;\n\n  return documentRect;\n};\n","// @flow\n\nimport type { Rect, ClientRectObject } from '../types';\n\nexport default (rect: Rect): ClientRectObject => ({\n  ...rect,\n  left: rect.x,\n  top: rect.y,\n  right: rect.x + rect.width,\n  bottom: rect.y + rect.height,\n});\n","// @flow\nimport type { VirtualElement, ClientRectObject } from '../types';\nimport type { RootOverflowArea } from '../enums';\nimport { viewport } from '../enums';\nimport getViewportRect from './getViewportRect';\nimport getDocumentRect from './getDocumentRect';\nimport listScrollParents from './listScrollParents';\nimport getOffsetParent from './getOffsetParent';\nimport getDocumentElement from './getDocumentElement';\nimport getComputedStyle from './getComputedStyle';\nimport unwrapVirtualElement from './unwrapVirtualElement';\nimport { isElement, isHTMLElement } from './instanceOf';\nimport getBoundingClientRect from './getBoundingClientRect';\nimport rectToClientRect from '../utils/rectToClientRect';\n\n// A \"clipping parent\" is a scrolling container with the characteristic of\n// clipping (or hiding) overflowing elements with a position different from\n// `initial`\nfunction getClippingParents(elementOrVirtualElement: Element | VirtualElement) {\n  const element = unwrapVirtualElement(elementOrVirtualElement);\n  const scrollParents = listScrollParents(element);\n  const canEscapeClipping = ['absolute', 'fixed'].includes(\n    getComputedStyle(element).position\n  );\n  const clipperElement =\n    canEscapeClipping && isHTMLElement(element)\n      ? getOffsetParent(element)\n      : element;\n\n  if (!isElement(clipperElement)) {\n    return [];\n  }\n\n  return scrollParents.filter(scrollParent => {\n    return isElement(scrollParent) && scrollParent.contains(clipperElement);\n  });\n}\n\n// Gets the maximum area that the element is visible in due to any number of\n// clipping parents\nexport default function getClippingRect(\n  elementOrVirtualElement: Element | VirtualElement,\n  rootArea: RootOverflowArea\n): ClientRectObject {\n  const element = unwrapVirtualElement(elementOrVirtualElement);\n  const documentElement = getDocumentElement(element);\n  const [firstClippingParent, ...restClippingParents] = getClippingParents(\n    element\n  );\n\n  // Fallback to document\n  if (\n    rootArea === 'document' &&\n    (firstClippingParent === documentElement || !firstClippingParent)\n  ) {\n    return rectToClientRect(getDocumentRect(documentElement));\n  }\n\n  // Fallback to viewport\n  if (rootArea === viewport && !firstClippingParent) {\n    return rectToClientRect(getViewportRect(element));\n  }\n\n  const clippingRect = restClippingParents.reduce((accRect, clippingParent) => {\n    const rect = getBoundingClientRect(clippingParent);\n    accRect.top = Math.max(rect.top, accRect.top);\n    accRect.right = Math.min(rect.right, accRect.right);\n    accRect.bottom = Math.min(rect.bottom, accRect.bottom);\n    accRect.left = Math.max(rect.left, accRect.left);\n    return accRect;\n  }, getBoundingClientRect(firstClippingParent));\n\n  clippingRect.width = clippingRect.right - clippingRect.left;\n  clippingRect.height = clippingRect.bottom - clippingRect.top;\n  clippingRect.x = clippingRect.left;\n  clippingRect.y = clippingRect.top;\n\n  return clippingRect;\n}\n","// @flow\nimport type {\n  ModifierArguments,\n  Modifier,\n  ClientRectObject,\n  VirtualElement,\n} from '../types';\nimport type { RootOverflowArea, OverflowArea, Context } from '../enums';\nimport getBoundingClientRect from '../dom-utils/getBoundingClientRect';\nimport getClippingRect from '../dom-utils/getClippingRect';\nimport getViewportRect from '../dom-utils/getViewportRect';\nimport computeOffsets from '../utils/computeOffsets';\nimport rectToClientRect from '../utils/rectToClientRect';\nimport {\n  clippingParents,\n  reference,\n  popper,\n  bottom,\n  top,\n  right,\n} from '../enums';\nimport unwrapVirtualElement from '../dom-utils/unwrapVirtualElement';\n\ntype Options = {\n  area: OverflowArea,\n  rootArea: RootOverflowArea,\n  elementContext: Context,\n  altArea: boolean,\n};\n\n// if the number is positive, the popper is overflowing by that number of pixels\n// when 0, or negative, the popper is within its boundaries\ntype OverflowOffsets = {\n  top: number,\n  bottom: number,\n  right: number,\n  left: number,\n};\n\nconst getOverflowOffsets = (\n  popperClientRect,\n  boundaryClientRect\n): OverflowOffsets => ({\n  top: boundaryClientRect.top - popperClientRect.top,\n  bottom: popperClientRect.bottom - boundaryClientRect.bottom,\n  left: boundaryClientRect.left - popperClientRect.left,\n  right: popperClientRect.right - boundaryClientRect.right,\n});\n\nconst getOverflowRect = (\n  elementOrVirtualElement: Element | VirtualElement,\n  area: OverflowArea,\n  rootArea: RootOverflowArea\n): ClientRectObject => {\n  const element = unwrapVirtualElement(elementOrVirtualElement);\n\n  switch (area) {\n    case 'clippingParents':\n      return getClippingRect(element, rootArea);\n    case 'viewport':\n      return rectToClientRect(getViewportRect(element));\n    default:\n      return getBoundingClientRect(area);\n  }\n};\n\nfunction detectOverflow({ state, options, name }: ModifierArguments<Options>) {\n  const {\n    area = clippingParents,\n    rootArea = 'document',\n    elementContext = popper,\n    altArea = false,\n  } = options;\n\n  const altContext = elementContext === popper ? reference : popper;\n\n  const referenceElement = state.elements.reference;\n  const popperRect = state.measures.popper;\n  const element = state.elements[altArea ? altContext : elementContext];\n\n  const clippingClientRect = getOverflowRect(element, area, rootArea);\n\n  const referenceClientRect = getBoundingClientRect(referenceElement);\n\n  const popperOffsets = computeOffsets({\n    reference: referenceClientRect,\n    element: popperRect,\n    strategy: 'absolute',\n    placement: state.placement,\n    scroll: {\n      scrollTop: 0,\n      scrollLeft: 0,\n    },\n  });\n\n  const popperClientRect = rectToClientRect({\n    ...popperRect,\n    ...popperOffsets,\n  });\n\n  const elementClientRect =\n    elementContext === popper ? popperClientRect : referenceClientRect;\n\n  const overflowOffsets = getOverflowOffsets(\n    elementClientRect,\n    clippingClientRect\n  );\n\n  // Offsets can be applied only to the popper element\n  if (elementContext === popper) {\n    const offset = state.modifiersData.offset;\n\n    Object.keys(overflowOffsets).forEach(key => {\n      const multiply = [right, bottom].includes(key) ? 1 : -1;\n      const axis = [top, bottom].includes(key) ? 'y' : 'x';\n      overflowOffsets[key] += offset[axis] * multiply;\n    });\n  }\n\n  state.modifiersData[name] = {\n    overflowOffsets: overflowOffsets,\n  };\n\n  return state;\n}\n\nexport default ({\n  name: 'detectOverflow',\n  enabled: true,\n  phase: 'read',\n  fn: detectOverflow,\n  requires: ['popperOffsets'],\n  optionallyRequires: ['offset'],\n  data: {},\n}: Modifier<Options>);\n","// @flow\nimport type {\n  PositioningStrategy,\n  Offsets,\n  Modifier,\n  ModifierArguments,\n} from '../types';\n\n// This modifier takes the Popper state and prepares some StyleSheet properties\n// that can be applied to the popper element to make it render in the expected position.\n\ntype Options = {\n  gpuAcceleration?: boolean,\n};\n\n// Round the offsets to the nearest suitable subpixel based on the DPR\nconst roundOffsets = ({ x, y }) => {\n  const dpr = window.devicePixelRatio;\n  return {\n    x: Math.round(x * dpr) / dpr || 0,\n    y: Math.round(y * dpr) / dpr || 0,\n  };\n};\n\nexport const mapToStyles = ({\n  offsets,\n  position,\n  gpuAcceleration,\n}: {\n  offsets: Offsets,\n  position: PositioningStrategy,\n  gpuAcceleration: boolean,\n}) => {\n  const { x, y } = roundOffsets(offsets);\n  const hasX = offsets.hasOwnProperty('x');\n  const hasY = offsets.hasOwnProperty('y');\n\n  // Layer acceleration can disable subpixel rendering which causes slightly\n  // blurry text on low PPI displays.\n  // Zooming can change the DPR, but it seems to report a value that will\n  // cleanly divide the values into the appropriate subpixels.\n  if (gpuAcceleration === false || window.devicePixelRatio < 2) {\n    return {\n      top: hasY ? `${y}px` : '',\n      left: hasX ? `${x}px` : '',\n      transform: '',\n      position,\n    };\n  } else {\n    return {\n      top: hasY ? '0' : '',\n      left: hasX ? '0' : '',\n      transform: `translate3d(${x}px, ${y}px, 0)`,\n      position,\n    };\n  }\n};\n\nfunction computeStyles({ state, options }: ModifierArguments<Options>) {\n  const { gpuAcceleration = true } = options;\n\n  // popper offsets are always available\n  state.styles.popper = {\n    ...state.styles.popper,\n    ...mapToStyles({\n      offsets: state.modifiersData.popperOffsets,\n      position: state.options.strategy,\n      gpuAcceleration,\n    }),\n  };\n\n  // arrow offsets may not be available\n  if (state.modifiersData.arrow != null) {\n    state.styles.arrow = {\n      ...state.styles.arrow,\n      ...mapToStyles({\n        offsets: state.modifiersData.arrow,\n        position: 'absolute',\n        gpuAcceleration,\n      }),\n    };\n  }\n\n  state.attributes.popper = {\n    ...state.attributes.popper,\n    'data-popper-placement': state.placement,\n  };\n\n  return state;\n}\n\nexport default ({\n  name: 'computeStyles',\n  enabled: true,\n  phase: 'afterMain',\n  fn: computeStyles,\n  data: {},\n}: Modifier<Options>);\n","// @flow\nimport type { Modifier, ModifierArguments } from '../types';\nimport getNodeName from '../dom-utils/getNodeName';\nimport { isHTMLElement } from '../dom-utils/instanceOf';\n\n// This modifier takes the styles prepared by the `computeStyles` modifier\n// and applies them to the HTMLElements such as popper and arrow\n\nfunction applyStyles({ state }: ModifierArguments<{||}>) {\n  Object.keys(state.elements).forEach(name => {\n    const style = state.styles[name] || {};\n\n    const attributes = state.attributes[name] || {};\n    const element = state.elements[name];\n\n    // arrow is optional + virtual elements\n    if (!isHTMLElement(element) || !getNodeName(element)) {\n      return;\n    }\n\n    // Flow doesn't support to extend this property, but it's the most\n    // effective way to apply styles to an HTMLElement\n    // $FlowFixMe\n    Object.assign(element.style, style);\n\n    Object.entries(attributes).forEach(([name, value]: [string, any]) => {\n      if (value === false) {\n        element.removeAttribute(name);\n      } else {\n        element.setAttribute(name, value === true ? '' : value);\n      }\n    });\n  });\n\n  return state;\n}\n\nfunction onDestroy({ state }: ModifierArguments<{||}>) {\n  Object.keys(state.elements).forEach(name => {\n    const element = state.elements[name];\n    const styleProperties = Object.keys(\n      state.styles.hasOwnProperty(name) ? { ...state.styles[name] } : {}\n    );\n    const attributes = state.attributes[name] || {};\n\n    // Set all values to an empty string to unset them\n    const style = styleProperties.reduce(\n      (style, property) => ({\n        ...style,\n        [String(property)]: '',\n      }),\n      {}\n    );\n\n    // arrow is optional + virtual elements\n    if (!isHTMLElement(element) || !getNodeName(element)) {\n      return;\n    }\n\n    // Flow doesn't support to extend this property, but it's the most\n    // effective way to apply styles to an HTMLElement\n    // $FlowFixMe\n    Object.assign(element.style, style);\n\n    Object.keys(attributes).forEach(attribute =>\n      element.removeAttribute(attribute)\n    );\n  });\n}\n\nexport default ({\n  name: 'applyStyles',\n  enabled: true,\n  phase: 'write',\n  fn: applyStyles,\n  onDestroy,\n  requires: ['computeStyles'],\n}: Modifier<{||}>);\n","// @flow\nimport type { Placement } from '../enums';\nimport type { ModifierArguments, Modifier, Rect } from '../types';\nimport getBasePlacement from '../utils/getBasePlacement';\nimport { top, left, right } from '../enums';\n\nexport function distanceAndSkiddingToXY(\n  placement: Placement,\n  measures: { popper: Rect, reference: Rect },\n  offsetValue: OffsetsFunction | [number, number]\n): [number, number] {\n  const basePlacement = getBasePlacement(placement);\n  const invertDistance = [left, top].includes(basePlacement) ? -1 : 1;\n\n  let [distance, skidding] =\n    typeof offsetValue === 'function'\n      ? offsetValue({\n          ...measures,\n          placement,\n        })\n      : offsetValue;\n\n  distance = (distance || 0) * invertDistance;\n  skidding = skidding || 0;\n\n  return [left, right].includes(basePlacement)\n    ? [distance, skidding]\n    : [skidding, distance];\n}\n\ntype OffsetsFunction = ({\n  popper: Rect,\n  reference: Rect,\n  placement: Placement,\n}) => [?number, ?number];\n\ntype Options = {\n  offset: OffsetsFunction | [number, number],\n};\n\nfunction offset({ state, options, name }: ModifierArguments<Options>) {\n  const { offset = [0, 0] } = options;\n\n  const [x, y] = distanceAndSkiddingToXY(\n    state.placement,\n    state.measures,\n    offset\n  );\n\n  state.modifiersData.popperOffsets.x += x;\n  state.modifiersData.popperOffsets.y += y;\n\n  state.modifiersData[name] = { x, y };\n\n  return state;\n}\n\nexport default ({\n  name: 'offset',\n  enabled: true,\n  phase: 'read',\n  requires: ['popperOffsets'],\n  fn: offset,\n}: Modifier<Options>);\n","// @flow\nimport type { Placement } from '../enums';\n\nconst hash = { left: 'right', right: 'left', bottom: 'top', top: 'bottom' };\n\nexport default (placement: Placement): Placement =>\n  (placement.replace(/left|right|bottom|top/g, matched => hash[matched]): any);\n","// @flow\nimport type { PaddingObject } from '../types';\n\nexport default (paddingObject: $Shape<PaddingObject>): PaddingObject => ({\n  top: 0,\n  bottom: 0,\n  left: 0,\n  right: 0,\n  ...paddingObject,\n});\n","// @flow\nexport default function expandToHashMap<\n  T: number | string | boolean,\n  K: string\n>(value: T, keys: Array<K>): { [key: string]: T } {\n  return keys.reduce((hashMap, key) => {\n    hashMap[key] = value;\n    return hashMap;\n  }, {});\n}\n","// @flow\nimport type { Placement } from '../enums';\nimport type { ModifierArguments, Modifier, Padding } from '../types';\nimport getOppositePlacement from '../utils/getOppositePlacement';\nimport getBasePlacement from '../utils/getBasePlacement';\nimport mergePaddingObject from '../utils/mergePaddingObject';\nimport expandToHashMap from '../utils/expandToHashMap';\nimport { basePlacements } from '../enums';\n\ntype Options = {\n  fallbackPlacements: Array<Placement>,\n  padding: Padding,\n};\n\nfunction flip({ state, options, name }: ModifierArguments<Options>) {\n  const placement = state.placement;\n  const defaultFallbackPlacements = [\n    getOppositePlacement(state.options.placement),\n  ];\n  const {\n    fallbackPlacements = defaultFallbackPlacements,\n    padding = 0,\n  } = options;\n  const overflow = state.modifiersData['detectOverflow:flip'].overflowOffsets;\n  const flipIndex = state.modifiersData[name].index;\n\n  const paddingObject = mergePaddingObject(\n    typeof padding !== 'number'\n      ? padding\n      : expandToHashMap(padding, basePlacements)\n  );\n\n  const placementOrder = [state.options.placement, ...fallbackPlacements];\n\n  const flippedPlacement = placementOrder[flipIndex];\n\n  if (!flippedPlacement && placement !== state.options.placement) {\n    state.placement = state.options.placement;\n    state.reset = true;\n    return state;\n  }\n\n  if (!flippedPlacement && placement === state.options.placement) {\n    return state;\n  }\n\n  const basePlacement = getBasePlacement(flippedPlacement);\n  const fits = overflow[basePlacement] + paddingObject[basePlacement] <= 0;\n\n  if (!fits) {\n    state.modifiersData[name].index += 1;\n    state.reset = true;\n    return state;\n  } else if (fits && state.placement !== flippedPlacement) {\n    state.placement = flippedPlacement;\n    state.reset = true;\n    return state;\n  }\n\n  return state;\n}\n\nexport default ({\n  name: 'flip',\n  enabled: true,\n  phase: 'main',\n  fn: flip,\n  requires: ['detectOverflow:flip'],\n  optionallyRequires: ['offset'],\n  data: { index: 0 },\n}: Modifier<Options>);\n","// @flow\n\nexport default (axis: 'x' | 'y'): 'x' | 'y' => (axis === 'x' ? 'y' : 'x');\n","// @flow\n\nexport default (min: number, value: number, max: number): number =>\n  Math.max(min, Math.min(value, max));\n","// @flow\nimport {\n  basePlacements,\n  top,\n  left,\n  right,\n  bottom,\n  surfaces,\n  edges,\n  center,\n} from '../enums';\nimport type { Tether } from '../enums';\nimport type { ModifierArguments, Modifier, Padding } from '../types';\nimport getBasePlacement from '../utils/getBasePlacement';\nimport getMainAxisFromPlacement from '../utils/getMainAxisFromPlacement';\nimport getAltAxis from '../utils/getAltAxis';\nimport mergePaddingObject from '../utils/mergePaddingObject';\nimport expandToHashMap from '../utils/expandToHashMap';\nimport within from '../utils/within';\nimport addClientRectMargins from '../dom-utils/addClientRectMargins';\nimport getLayoutRect from '../dom-utils/getLayoutRect';\n\ntype Options = {\n  /* Prevents boundaries overflow on the main axis */\n  mainAxis: boolean,\n  /* Prevents boundaries overflow on the alternate axis */\n  altAxis: boolean,\n  /**\n   * Allows the popper to overflow from its boundaries to keep it near its reference element:\n   * - false: popper can never overflow, will detach from reference to stay visible;\n   * - \"center\": popper can overflow once the center of the popper is at the edge of the reference;\n   * - \"edges\": popper can overflow once the opposite edges are level;\n   * - \"surfaces\":  popper can overflow once the surfaces are level;\n   */\n  tether: Tether,\n  /* Sets a padding to the provided boundary */\n  padding: Padding,\n};\n\nfunction preventOverflow({ state, options, name }: ModifierArguments<Options>) {\n  const {\n    mainAxis: checkMainAxis = true,\n    altAxis: checkAltAxis = false,\n    tether = center,\n    padding = 0,\n  } = options;\n  const overflow =\n    state.modifiersData['detectOverflow:preventOverflow'].overflowOffsets;\n  const basePlacement = getBasePlacement(state.placement);\n  const mainAxis = getMainAxisFromPlacement(basePlacement);\n  const altAxis = getAltAxis(mainAxis);\n  const popperOffsets = state.modifiersData.popperOffsets;\n  const referenceRect = state.measures.reference;\n  const popperRect = state.measures.popper;\n  const paddingObject = mergePaddingObject(\n    typeof padding !== 'number'\n      ? padding\n      : expandToHashMap(padding, basePlacements)\n  );\n\n  const data = { x: 0, y: 0 };\n\n  if (checkMainAxis) {\n    const mainSide = mainAxis === 'y' ? top : left;\n    const altSide = mainAxis === 'y' ? bottom : right;\n    const len = mainAxis === 'y' ? 'height' : 'width';\n    const offset = popperOffsets[mainAxis];\n\n    const min =\n      popperOffsets[mainAxis] + overflow[mainSide] + paddingObject[mainSide];\n    const max =\n      popperOffsets[mainAxis] - overflow[altSide] - paddingObject[altSide];\n\n    const additive =\n      tether === surfaces\n        ? popperRect[len] / 2\n        : tether === edges\n        ? -popperRect[len] / 2\n        : 0;\n\n    // For the \"edges\" value, we need to include the arrow in the calculation\n    // so the arrow doesn't go outside the reference bounds\n    const arrowElement = state.elements.arrow;\n    const arrowElementRect =\n      arrowElement && tether === edges\n        ? addClientRectMargins(getLayoutRect(arrowElement), arrowElement)\n        : { width: 0, height: 0 };\n\n    const tetherMin =\n      state.modifiersData.popperOffsets[mainAxis] -\n      referenceRect[len] / 2 +\n      additive +\n      arrowElementRect[len];\n    const tetherMax =\n      state.modifiersData.popperOffsets[mainAxis] +\n      referenceRect[len] / 2 -\n      additive -\n      arrowElementRect[len];\n\n    const lenCondition =\n      referenceRect[len] > popperRect[len] || tether !== surfaces;\n\n    const preventedOffset = within(\n      tether ? Math.min(min, lenCondition ? tetherMax : tetherMin) : min,\n      offset,\n      tether ? Math.max(max, lenCondition ? tetherMin : tetherMax) : max\n    );\n\n    state.modifiersData.popperOffsets[mainAxis] = preventedOffset;\n    data[mainAxis] = preventedOffset - offset;\n  }\n\n  if (checkAltAxis) {\n    const mainSide = mainAxis === 'x' ? top : left;\n    const altSide = mainAxis === 'x' ? bottom : right;\n    const offset = popperOffsets[altAxis];\n\n    const preventedOffset = within(\n      offset + overflow[mainSide] + paddingObject[mainSide],\n      offset,\n      offset - overflow[altSide] - paddingObject[altSide]\n    );\n\n    state.modifiersData.popperOffsets[altAxis] = preventedOffset;\n    data[altAxis] = preventedOffset - offset;\n  }\n\n  state.modifiersData[name] = data;\n\n  return state;\n}\n\nexport default ({\n  name: 'preventOverflow',\n  enabled: true,\n  phase: 'main',\n  fn: preventOverflow,\n  requires: ['detectOverflow:preventOverflow'],\n  optionallyRequires: ['offset'],\n}: Modifier<Options>);\n","// @flow\nimport type { Modifier, ModifierArguments } from '../types';\nimport getBasePlacement from '../utils/getBasePlacement';\nimport addClientRectMargins from '../dom-utils/addClientRectMargins';\nimport getLayoutRect from '../dom-utils/getLayoutRect';\nimport getMainAxisFromPlacement from '../utils/getMainAxisFromPlacement';\nimport within from '../utils/within';\nimport { left, right } from '../enums';\n\ntype Options = { element: HTMLElement | string };\n\nfunction arrow({ state, name }: ModifierArguments<Options>) {\n  const arrowElement = state.elements.arrow;\n  const popperOffsets = state.modifiersData.popperOffsets;\n  const basePlacement = getBasePlacement(state.placement);\n  const axis = getMainAxisFromPlacement(basePlacement);\n  const isVertical = [left, right].includes(basePlacement);\n  const len = isVertical ? 'height' : 'width';\n\n  if (!arrowElement) {\n    return state;\n  }\n\n  const arrowElementRect = addClientRectMargins(\n    getLayoutRect(arrowElement),\n    arrowElement\n  );\n\n  const endDiff =\n    state.measures.reference[len] +\n    state.measures.reference[axis] -\n    popperOffsets[axis] -\n    state.measures.popper[len];\n  const startDiff = popperOffsets[axis] - state.measures.reference[axis];\n\n  const centerToReference = endDiff / 2 - startDiff / 2;\n\n  let center =\n    state.measures.popper[len] / 2 -\n    arrowElementRect[len] / 2 +\n    centerToReference;\n\n  // Make sure the arrow doesn't overflow the popper if the center point is\n  // outside of the popper bounds\n  center = within(\n    0,\n    center,\n    state.measures.popper[len] - arrowElementRect[len]\n  );\n\n  // Prevents breaking syntax highlighting...\n  const axisProp: string = axis;\n  state.modifiersData[name] = { [axisProp]: center };\n\n  return state;\n}\n\nfunction onLoad({ state, options }: ModifierArguments<Options>) {\n  let { element: arrowElement = '[data-popper-arrow]' } = options;\n\n  // CSS selector\n  if (typeof arrowElement === 'string') {\n    arrowElement = state.elements.popper.querySelector(arrowElement);\n\n    if (!arrowElement) {\n      return state;\n    }\n  }\n\n  if (!state.elements.popper.contains(arrowElement)) {\n    if (__DEV__) {\n      console.error(\n        [\n          'Popper: \"arrow\" modifier\\'s `element` must be a child of the popper',\n          'element.',\n        ].join(' ')\n      );\n    }\n\n    return state;\n  }\n\n  state.elements.arrow = arrowElement;\n\n  return state;\n}\n\nexport default ({\n  name: 'arrow',\n  enabled: true,\n  phase: 'main',\n  fn: arrow,\n  onLoad,\n  requires: ['popperOffsets'],\n  optionallyRequires: ['preventOverflow'],\n}: Modifier<Options>);\n","// @flow\nimport { popperGenerator } from './index';\nimport { viewport } from './enums';\nimport eventListeners from './modifiers/eventListeners';\nimport popperOffsets from './modifiers/popperOffsets';\nimport detectOverflow from './modifiers/detectOverflow';\nimport computeStyles from './modifiers/computeStyles';\nimport applyStyles from './modifiers/applyStyles';\nimport offset from './modifiers/offset';\nimport flip from './modifiers/flip';\nimport preventOverflow from './modifiers/preventOverflow';\nimport arrow from './modifiers/arrow';\n\nconst defaultModifiers = [\n  eventListeners,\n  popperOffsets,\n  {\n    ...detectOverflow,\n    name: 'detectOverflow:preventOverflow',\n  },\n  {\n    ...detectOverflow,\n    name: 'detectOverflow:flip',\n    options: { rootArea: viewport },\n  },\n  computeStyles,\n  applyStyles,\n  offset,\n  flip,\n  preventOverflow,\n  arrow,\n];\n\nconst createPopper = popperGenerator({ defaultModifiers });\n\n// eslint-disable-next-line import/no-unused-modules\nexport { createPopper, popperGenerator };\n"],"names":["top","bottom","right","left","basePlacements","start","end","center","edges","surfaces","clippingParents","viewport","popper","reference","placements","reduce","acc","placement","concat","beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite","modifierPhases","element","rect","JSON","parse","stringify","getBoundingClientRect","x","y","getWindow","node","ownerDocument","hasOwnProperty","defaultView","window","getWindowScroll","win","scrollLeft","pageXOffset","scrollTop","pageYOffset","isElement","OwnElement","Element","isHTMLElement","HTMLElement","isShadowRoot","ShadowRoot","getHTMLElementScroll","getNodeScroll","scrollParents","scroll","scrollParent","nodeScroll","contextElement","elementOrVirtualElement","commonOffsetParent","isFixed","unwrapVirtualElement","offsetParentRect","offsetParentScrollSum","getScrollSum","width","height","offsetLeft","offsetTop","offsetWidth","offsetHeight","nodeName","toLowerCase","getNodeName","parentNode","host","document","documentElement","getComputedStyle","getScrollParent","includes","body","overflow","overflowX","overflowY","test","getParentNode","listScrollParents","list","isBody","target","updatedList","styles","parseFloat","marginTop","marginRight","marginBottom","marginLeft","margins","getElementMargins","getTrueOffsetParent","offsetParent","getOffsetParent","isTableElement","position","isOffsetContainer","firstElementChild","getRoot","getCommonOffsetParent","element1","element2","element1root","element2root","order","compareDocumentPosition","Node","DOCUMENT_POSITION_FOLLOWING","range","createRange","setStart","setEnd","commonAncestorContainer","modifiers","map","Map","visited","Set","result","forEach","modifier","set","name","sort","add","requires","optionallyRequires","dep","has","depModifier","get","push","orderedModifiers","phase","filter","microtaskDebounce","fn","pending","Promise","resolve","then","undefined","str","args","p","c","replace","INVALID_MODIFIER_ERROR","MISSING_DEPENDENCY_ERROR","VALID_PROPERTIES","Object","keys","key","console","error","format","String","enabled","join","onLoad","onDestroy","Array","isArray","s","requirement","find","mod","INVALID_ELEMENT_ERROR","INFINITE_LOOP_ERROR","areValidElements","some","defaultOptionsValue","strategy","popperGenerator","generatorOptions","defaultModifiers","defaultOptions","createPopper","options","referenceElement","unwrapJqueryElement","popperElement","state","modifiersData","elements","attributes","instance","setOptions","orderModifiers","defaultModifier","validateModifiers","forceUpdate","measures","getCompositeRect","addClientRectMargins","getLayoutRect","reset","prevPlacement","data","__debug_loops__","index","length","update","debounce","destroy","passive","toggleEventListeners","resize","addEventListener","removeEventListener","split","basePlacement","getBasePlacement","variationPlacement","getVariationPlacement","offsets","mainAxis","getMainAxisFromPlacement","len","Math","floor","ceil","popperOffsets","computeOffsets","innerWidth","innerHeight","winScroll","documentRect","getDocumentElement","max","getClippingParents","canEscapeClipping","clipperElement","contains","getClippingRect","rootArea","firstClippingParent","restClippingParents","rectToClientRect","getDocumentRect","getViewportRect","clippingRect","accRect","clippingParent","min","getOverflowOffsets","popperClientRect","boundaryClientRect","getOverflowRect","area","detectOverflow","elementContext","altArea","altContext","popperRect","clippingClientRect","referenceClientRect","elementClientRect","overflowOffsets","offset","multiply","axis","roundOffsets","dpr","devicePixelRatio","round","mapToStyles","gpuAcceleration","hasX","hasY","transform","computeStyles","arrow","applyStyles","style","assign","entries","value","removeAttribute","setAttribute","styleProperties","property","attribute","distanceAndSkiddingToXY","offsetValue","invertDistance","distance","skidding","hash","matched","paddingObject","expandToHashMap","hashMap","flip","defaultFallbackPlacements","getOppositePlacement","fallbackPlacements","padding","flipIndex","mergePaddingObject","placementOrder","flippedPlacement","fits","preventOverflow","checkMainAxis","altAxis","checkAltAxis","tether","getAltAxis","referenceRect","mainSide","altSide","additive","arrowElement","arrowElementRect","tetherMin","tetherMax","lenCondition","preventedOffset","within","isVertical","endDiff","startDiff","centerToReference","axisProp","querySelector","eventListeners"],"mappings":"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"}